!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t()}):"object"==typeof exports?module.exports=t():t()}(this,function(){"use strict";return angular.module("tmh.dynamicLocale",[]).config(["$provide",function(e){function t(e){return e.$stateful=!0,e}e.decorator("dateFilter",["$delegate",t]),e.decorator("numberFilter",["$delegate",t]),e.decorator("currencyFilter",["$delegate",t])}]).constant("tmhDynamicLocale.STORAGE_KEY","tmhDynamicLocale.locale").provider("tmhDynamicLocale",["tmhDynamicLocale.STORAGE_KEY",function(e){function t(e,t,n,a){var c=document.createElement("script"),r=o?o:document.getElementsByTagName("body")[0],i=!1;c.type="text/javascript",c.readyState?c.onreadystatechange=function(){"complete"!==c.readyState&&"loaded"!==c.readyState||(c.onreadystatechange=null,a(function(){i||(i=!0,r.removeChild(c),t())},30,!1))}:(c.onload=function(){i||(i=!0,r.removeChild(c),t())},c.onerror=function(){i||(i=!0,r.removeChild(c),n())}),c.src=e,c.async=!0,r.appendChild(c)}function n(e,n,a,o,i,l,d){function f(e,t){r===a&&(angular.forEach(e,function(n,a){t[a]?angular.isArray(t[a])&&(e[a].length=t[a].length):delete e[a]}),angular.forEach(t,function(n,a){angular.isArray(t[a])||angular.isObject(t[a])?(e[a]||(e[a]=angular.isArray(t[a])?[]:{}),f(e[a],t[a])):e[a]=t[a]}))}if(s[a])return r=a,s[a];var h,g=i.defer();return a===r?g.resolve(n):(h=l.get(a))?(r=a,o.$evalAsync(function(){f(n,h),c.put(u,a),o.$broadcast("$localeChangeSuccess",a,n),g.resolve(n)})):(r=a,s[a]=g.promise,t(e,function(){var e=angular.injector(["ngLocale"]),t=e.get("$locale");f(n,t),l.put(a,t),delete s[a],o.$applyAsync(function(){c.put(u,a),o.$broadcast("$localeChangeSuccess",a,n),g.resolve(n)})},function(){delete s[a],o.$applyAsync(function(){r===a&&(r=n.id),o.$broadcast("$localeChangeError",a),g.reject(a)})},d)),g.promise}var a,o,c,r,i="angular/i18n/angular-locale_{{locale}}.js",l="tmhDynamicLocaleStorageCache",u=e,s={},d={};this.localeLocationPattern=function(e){return e?(i=e,this):i},this.appendScriptTo=function(e){o=e},this.useStorage=function(e){l=e},this.useCookieStorage=function(){this.useStorage("$cookieStore")},this.defaultLocale=function(e){a=e},this.storageKey=function(e){return e?(u=e,this):u},this.addLocalePatternValue=function(e,t){d[e]=t},this.$get=["$rootScope","$injector","$interpolate","$locale","$q","tmhDynamicLocaleCache","$timeout",function(e,t,o,s,f,h,g){function m(t){var a={locale:t,angularVersion:angular.version.full};return n(y(angular.extend({},d,a)),s,t,e,f,h,g)}var y=o(i);return c=t.get(l),e.$evalAsync(function(){var e;(e=c.get(u)||a)&&m(e)}),{set:m,get:function(){return r}}}]}]).provider("tmhDynamicLocaleCache",function(){this.$get=["$cacheFactory",function(e){return e("tmh.dynamicLocales")}]}).provider("tmhDynamicLocaleStorageCache",function(){this.$get=["$cacheFactory",function(e){return e("tmh.dynamicLocales.store")}]}).run(["tmhDynamicLocale",angular.noop]),"tmh.dynamicLocale"});